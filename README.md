# My Publishing Station

ä¸€ä¸ªä½¿ç”¨ Vue + Express + SQLite æ„å»ºçš„ç°ä»£åŒ–åšå®¢ç³»ç»Ÿï¼Œå…·æœ‰ç¾è§‚çš„ç•Œé¢è®¾è®¡å’Œå®Œæ•´çš„åŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Vue 3** - ç°ä»£åŒ–çš„å‰ç«¯æ¡†æ¶
- **Vue Router** - è·¯ç”±ç®¡ç†
- **Pinia** - çŠ¶æ€ç®¡ç†
- **Vite** - å¿«é€Ÿçš„æ„å»ºå·¥å…·
- **Tailwind CSS** - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **Axios** - HTTP å®¢æˆ·ç«¯
- **Quill Editor** - å¯Œæ–‡æœ¬ç¼–è¾‘å™¨

### åç«¯
- **Node.js** - JavaScript è¿è¡Œæ—¶
- **Express** - Web åº”ç”¨æ¡†æ¶
- **SQLite** - è½»é‡çº§åµŒå…¥å¼æ•°æ®åº“
- **bcryptjs** - å¯†ç åŠ å¯†
- **jsonwebtoken** - JWT è®¤è¯
- **CORS** - è·¨åŸŸèµ„æºå…±äº«

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… æ–‡ç« åˆ—è¡¨å±•ç¤ºï¼ˆåˆ†é¡µæ”¯æŒï¼‰
- âœ… æ–‡ç« è¯¦æƒ…é¡µ
- âœ… **å¤šæ ‡ç­¾ç³»ç»Ÿ**ï¼ˆæ›¿ä»£å•ä¸€åˆ†ç±»ï¼‰
- âœ… å…¨æ–‡æœç´¢
- âœ… **å¯Œæ–‡æœ¬ç¼–è¾‘å™¨**ï¼ˆæ”¯æŒæ ¼å¼åŒ–ã€é¢œè‰²ã€å›¾ç‰‡æ’å…¥ï¼‰
- âœ… æ–‡ç« æ”¶è—
- âœ… è¯„è®ºç³»ç»Ÿï¼ˆå¸¦åˆ†é¡µï¼‰
- âœ… å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯å‹å¥½ï¼‰
- âœ… ç°ä»£åŒ–çš„ UI è®¾è®¡ï¼ˆæ˜Ÿç©ºèƒŒæ™¯ã€é€æ˜æ•ˆæœï¼‰
- âœ… **ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿ**ï¼ˆå»ç‰¹æ•ˆç‰ˆ/å…¨ç‰¹æ•ˆç‰ˆï¼‰
- âœ… **åŠ¨æ€èƒŒæ™¯å›¾ç‰‡**ï¼ˆå…¨ç‰¹æ•ˆç‰ˆè‡ªåŠ¨è½®æ¢èƒŒæ™¯ï¼‰
- âœ… **å°å·¥å…·é¡µé¢**ï¼ˆå·¥å…·é›†åˆé¡µé¢ï¼‰

### ç”¨æˆ·ç³»ç»Ÿ
- âœ… **ç”¨æˆ·æ³¨å†Œ/ç™»å½•**
- âœ… **JWT è®¤è¯**
- âœ… **è§’è‰²ç®¡ç†**ï¼ˆç®¡ç†å‘˜/æ™®é€šç”¨æˆ·ï¼‰
- âœ… **ä¸ªäººä¿¡æ¯ä¿®æ”¹**ï¼ˆæ˜µç§°ã€å¤´åƒã€å¯†ç ï¼‰
- âœ… **å¿˜è®°å¯†ç **ï¼ˆé€šè¿‡ç”¨æˆ·åå’Œé‚®ç®±é‡ç½®ï¼‰

### ç®¡ç†åŠŸèƒ½
- âœ… **æ–‡ç« ç®¡ç†**ï¼ˆåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
- âœ… **ç”¨æˆ·ç®¡ç†**ï¼ˆæŸ¥çœ‹ã€ä¿®æ”¹è§’è‰²ã€åˆ é™¤ï¼‰
- âœ… ä¾§è¾¹æ ï¼ˆæœ€æ–°æ–‡ç« ã€æœ€æ–°ç•™è¨€ã€éšæœºæ–‡ç« ã€åˆ†ç±»æ ‡ç­¾ï¼‰

### æŠ€æœ¯ç‰¹æ€§
- âœ… RESTful API
- âœ… SQLite æ•°æ®åº“å­˜å‚¨
- âœ… å¯†ç åŠ å¯†å­˜å‚¨
- âœ… Token è®¤è¯æˆæƒ

## é¡¹ç›®ç»“æ„

```
blog/
â”œâ”€â”€ client/                 # å‰ç«¯ Vue åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/        # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ composables/   # Vue Composables
â”‚   â”‚   â”œâ”€â”€ api/           # API å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ router/        # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/                # åç«¯ Express æœåŠ¡å™¨
â”‚   â”œâ”€â”€ index.js          # æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ init-db.js        # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ blog.db           # SQLite æ•°æ®åº“ï¼ˆè¿è¡Œåç”Ÿæˆï¼‰
â”œâ”€â”€ package.json          # æ ¹ package.json
â””â”€â”€ README.md
```

## å®‰è£…å’Œè¿è¡Œ

### å‰ç½®è¦æ±‚

- Node.js 16+ 
- npm æˆ– yarn

### å®‰è£…æ­¥éª¤

1. **å®‰è£…æ ¹ç›®å½•ä¾èµ–**
```bash
npm install
```

2. **å®‰è£…å‰ç«¯ä¾èµ–**
```bash
cd client
npm install
cd ..
```

3. **åˆå§‹åŒ–æ•°æ®åº“**
```bash
npm run init-db
```

è¿™å°†åˆ›å»º SQLite æ•°æ®åº“å¹¶æ’å…¥ç¤ºä¾‹æ•°æ®ã€‚

**âš ï¸ é‡è¦æç¤ºï¼š** å¦‚æœä¹‹å‰æœ‰æ—§æ•°æ®åº“ï¼Œè¯·å…ˆåˆ é™¤ï¼š
```bash
# Windows PowerShell
Remove-Item server\blog.db

# Linux/Mac
rm server/blog.db
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯ï¼š
```bash
npm run dev
```

æˆ–è€…åˆ†åˆ«å¯åŠ¨ï¼š

å¯åŠ¨åç«¯æœåŠ¡å™¨ï¼ˆç«¯å£ 3001ï¼‰ï¼š
```bash
npm run server
```

å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£ 3000ï¼‰ï¼š
```bash
npm run client
```

5. **è®¿é—®åº”ç”¨**

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:3000

## API æ¥å£

### è®¤è¯ç›¸å…³
```bash
# æ³¨å†Œ
POST /api/auth/register
Body: { username, email, password }

# ç™»å½•
POST /api/auth/login
Body: { username, password }

# è·å–å½“å‰ç”¨æˆ·
GET /api/auth/me
Headers: Authorization: Bearer <token>
```

### æ–‡ç« ç›¸å…³
```bash
# è·å–æ–‡ç« åˆ—è¡¨ï¼ˆæ”¯æŒæ ‡ç­¾ç­›é€‰ï¼‰
GET /api/posts?tag=æŠ€æœ¯&page=1&limit=10&search=å…³é”®è¯

# è·å–å•ç¯‡æ–‡ç« ï¼ˆåŒ…å«æ ‡ç­¾ï¼‰
GET /api/posts/:id

# è·å–éšæœºæ–‡ç« 
GET /api/posts/random?limit=5

# åˆ›å»ºæ–‡ç« ï¼ˆç®¡ç†å‘˜ï¼‰
POST /api/posts
Headers: Authorization: Bearer <token>
Body: { title, content, tags: ["æ ‡ç­¾1", "æ ‡ç­¾2"], cover_image }

# æ›´æ–°æ–‡ç« ï¼ˆç®¡ç†å‘˜ï¼‰
PUT /api/posts/:id
Headers: Authorization: Bearer <token>
Body: { title, content, tags: ["æ ‡ç­¾1", "æ ‡ç­¾2"], cover_image }

# åˆ é™¤æ–‡ç« ï¼ˆç®¡ç†å‘˜ï¼‰
DELETE /api/posts/:id
Headers: Authorization: Bearer <token>
```

### æ ‡ç­¾ç›¸å…³
```bash
# è·å–æ‰€æœ‰æ ‡ç­¾
GET /api/tags

# è·å–åˆ†ç±»åˆ—è¡¨ï¼ˆå…¼å®¹æ—§ APIï¼‰
GET /api/categories
```

### ç”¨æˆ·ç›¸å…³
```bash
# è·å–ç”¨æˆ·ä¿¡æ¯
GET /api/user/profile
Headers: Authorization: Bearer <token>

# æ›´æ–°ç”¨æˆ·ä¿¡æ¯
PUT /api/user/profile
Headers: Authorization: Bearer <token>
Body: { username, avatar }

# ä¿®æ”¹å¯†ç 
POST /api/user/change-password
Headers: Authorization: Bearer <token>
Body: { currentPassword, newPassword }

# é‡ç½®å¯†ç 
POST /api/user/reset-password
Body: { username, email, newPassword }
```

### è¯„è®ºç›¸å…³
```bash
# è·å–æ–‡ç« è¯„è®º
GET /api/posts/:id/comments?page=1&limit=10

# æ·»åŠ è¯„è®º
POST /api/posts/:id/comments
Headers: Authorization: Bearer <token>
Body: { content }

# åˆ é™¤è¯„è®º
DELETE /api/comments/:id
Headers: Authorization: Bearer <token>

# è·å–æœ€æ–°è¯„è®º
GET /api/comments/recent?limit=10
```

### æ”¶è—ç›¸å…³
```bash
# åˆ‡æ¢æ”¶è—çŠ¶æ€
POST /api/posts/:id/favorite
Headers: Authorization: Bearer <token>
```

### ç®¡ç†å‘˜ç›¸å…³
```bash
# è·å–æ‰€æœ‰ç”¨æˆ·
GET /api/admin/users
Headers: Authorization: Bearer <token>

# æ›´æ–°ç”¨æˆ·è§’è‰²
PUT /api/admin/users/:id/role
Headers: Authorization: Bearer <token>
Body: { role: "admin" | "user" }

# åˆ é™¤ç”¨æˆ·
DELETE /api/admin/users/:id
Headers: Authorization: Bearer <token>

# è·å–æ‰€æœ‰æ–‡ç« ï¼ˆç®¡ç†ï¼‰
GET /api/admin/posts
Headers: Authorization: Bearer <token>
```

### èƒŒæ™¯å›¾ç‰‡ç›¸å…³
```bash
# è·å–èƒŒæ™¯å›¾ç‰‡ï¼ˆæ¨ªå±å›¾ç‰‡ï¼Œè¿‡æ»¤404ï¼‰
GET /api/background-images
Returns: { images: [{ url, width, height }] }
```

## æ•°æ®åº“ç»“æ„

### users è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| username | TEXT | ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰ |
| email | TEXT | é‚®ç®±ï¼ˆå”¯ä¸€ï¼‰ |
| password | TEXT | å¯†ç ï¼ˆåŠ å¯†ï¼‰ |
| avatar | TEXT | å¤´åƒ URL |
| role | TEXT | è§’è‰²ï¼ˆadmin/userï¼‰ |
| created_at | DATETIME | æ³¨å†Œæ—¶é—´ |

### posts è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| title | TEXT | æ–‡ç« æ ‡é¢˜ |
| content | TEXT | æ–‡ç« å†…å®¹ï¼ˆå¯Œæ–‡æœ¬ï¼‰ |
| cover_image | TEXT | å°é¢å›¾ç‰‡ URL |
| favorites_count | INTEGER | æ”¶è—æ•° |
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME | æ›´æ–°æ—¶é—´ |

### tags è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| name | TEXT | æ ‡ç­¾åç§°ï¼ˆå”¯ä¸€ï¼‰ |
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |

### post_tags è¡¨ï¼ˆæ–‡ç« -æ ‡ç­¾å…³è”ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| post_id | INTEGER | æ–‡ç«  ID |
| tag_id | INTEGER | æ ‡ç­¾ ID |
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |

### favorites è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| user_id | INTEGER | ç”¨æˆ· ID |
| post_id | INTEGER | æ–‡ç«  ID |
| created_at | DATETIME | æ”¶è—æ—¶é—´ |

### comments è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| post_id | INTEGER | æ–‡ç«  ID |
| user_id | INTEGER | ç”¨æˆ· ID |
| content | TEXT | è¯„è®ºå†…å®¹ |
| created_at | DATETIME | è¯„è®ºæ—¶é—´ |

## å¼€å‘è¯´æ˜

### é¦–æ¬¡ä½¿ç”¨

1. **ç¬¬ä¸€ä¸ªæ³¨å†Œçš„ç”¨æˆ·ä¼šè‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜**
2. **ç®¡ç†å‘˜å¯ä»¥åœ¨åå°åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æ–‡ç« **
3. **ç®¡ç†å‘˜å¯ä»¥ç®¡ç†ç”¨æˆ·ï¼ˆä¿®æ”¹è§’è‰²ã€åˆ é™¤ç”¨æˆ·ï¼‰**

### æ·»åŠ æ–°æ–‡ç« 

ç®¡ç†å‘˜ç™»å½•åå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ·»åŠ æ–‡ç« ï¼š

1. **é€šè¿‡ç®¡ç†åå°**ï¼ˆæ¨èï¼‰
   - ç™»å½•åè®¿é—® `/admin`
   - ç‚¹å‡»"åˆ›å»ºæ–°æ–‡ç« "
   - ä½¿ç”¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç¼–å†™å†…å®¹
   - æ·»åŠ æ ‡ç­¾
   - ä¿å­˜å‘å¸ƒ

2. **ä½¿ç”¨ API**
```bash
curl -X POST http://localhost:3001/api/posts \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <your_token>" \
  -d '{
    "title": "æ–°æ–‡ç« æ ‡é¢˜",
    "content": "<p>æ–‡ç« å†…å®¹ï¼ˆHTMLæ ¼å¼ï¼‰</p>",
    "tags": ["æŠ€æœ¯", "Vue"],
    "cover_image": "https://example.com/image.jpg"
  }'
```

3. **ç›´æ¥æ“ä½œæ•°æ®åº“**
```bash
sqlite3 server/blog.db
```

### è‡ªå®šä¹‰æ ·å¼

æ ·å¼ä½¿ç”¨ Tailwind CSSï¼Œé…ç½®æ–‡ä»¶åœ¨ `client/tailwind.config.js`ã€‚ä½ å¯ä»¥ä¿®æ”¹ä¸»é¢˜é¢œè‰²å’Œå…¶ä»–æ ·å¼é€‰é¡¹ã€‚

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

æ„å»ºåçš„æ–‡ä»¶å°†åœ¨ `client/dist` ç›®å½•ä¸­ã€‚

## ç‰¹æ€§å±•ç¤º

- ğŸ¨ **ç°ä»£åŒ–è®¾è®¡** - æ˜Ÿç©ºèƒŒæ™¯ã€é€æ˜æ•ˆæœã€æµç•…åŠ¨ç”»
- ğŸ“± **å“åº”å¼** - å®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- ğŸ” **æœç´¢åŠŸèƒ½** - æ”¯æŒæ ‡é¢˜å’Œå†…å®¹æœç´¢
- ğŸ·ï¸ **å¤šæ ‡ç­¾ç³»ç»Ÿ** - çµæ´»çš„æ ‡ç­¾ç®¡ç†å’Œç­›é€‰
- âœï¸ **å¯Œæ–‡æœ¬ç¼–è¾‘å™¨** - æ”¯æŒæ ¼å¼åŒ–ã€é¢œè‰²ã€å›¾ç‰‡
- ğŸ‘¤ **ç”¨æˆ·ç³»ç»Ÿ** - å®Œæ•´çš„è®¤è¯å’Œæˆæƒ
- ğŸ’¬ **è¯„è®ºäº’åŠ¨** - ç”¨æˆ·å¯ä»¥è¯„è®ºå’Œæ”¶è—æ–‡ç« 
- ğŸ‘‘ **è§’è‰²ç®¡ç†** - ç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·æƒé™åˆ†ç¦»
- âš¡ **æ€§èƒ½ä¼˜åŒ–** - ä½¿ç”¨ Vite å¿«é€Ÿæ„å»º
- ğŸ—„ï¸ **è½»é‡æ•°æ®åº“** - SQLite æ— éœ€é¢å¤–é…ç½®
- ğŸ”’ **å®‰å…¨ä¿éšœ** - JWT è®¤è¯ã€å¯†ç åŠ å¯†

## æ³¨æ„äº‹é¡¹

1. **ç¬¬ä¸€ä¸ªæ³¨å†Œçš„ç”¨æˆ·ä¼šè‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜**
2. **JWT Token æœ‰æ•ˆæœŸä¸º 7 å¤©**
3. **å¯†ç ä½¿ç”¨ bcrypt åŠ å¯†å­˜å‚¨**
4. **ç®¡ç†å‘˜ä¸èƒ½åˆ é™¤è‡ªå·±**
5. **æ‰€æœ‰éœ€è¦æƒé™çš„æ“ä½œéƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ Token**
6. **æ•°æ®åº“ç»“æ„æœ‰é‡å¤§æ›´æ–°ï¼Œæ—§æ•°æ®åº“éœ€è¦åˆ é™¤åé‡æ–°åˆå§‹åŒ–**

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

# My Publishing Station

ä¸€ä¸ªä½¿ç”¨ Vue + Express + SQLite æ„å»ºçš„ç°ä»£åŒ–åšå®¢ç³»ç»Ÿï¼Œå…·æœ‰ç¾è§‚çš„ç•Œé¢è®¾è®¡å’Œå®Œæ•´çš„åŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Vue 3** - ç°ä»£åŒ–çš„å‰ç«¯æ¡†æ¶
- **Vue Router** - è·¯ç”±ç®¡ç†
- **Pinia** - çŠ¶æ€ç®¡ç†
- **Vite** - å¿«é€Ÿçš„æ„å»ºå·¥å…·
- **Tailwind CSS** - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **Axios** - HTTP å®¢æˆ·ç«¯
- **Quill Editor** - å¯Œæ–‡æœ¬ç¼–è¾‘å™¨

### åç«¯
- **Node.js** - JavaScript è¿è¡Œæ—¶
- **Express** - Web åº”ç”¨æ¡†æ¶
- **SQLite** - è½»é‡çº§åµŒå…¥å¼æ•°æ®åº“
- **bcryptjs** - å¯†ç åŠ å¯†
- **jsonwebtoken** - JWT è®¤è¯
- **CORS** - è·¨åŸŸèµ„æºå…±äº«

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… æ–‡ç« åˆ—è¡¨å±•ç¤ºï¼ˆåˆ†é¡µæ”¯æŒï¼‰
- âœ… æ–‡ç« è¯¦æƒ…é¡µ
- âœ… **å¤šæ ‡ç­¾ç³»ç»Ÿ**ï¼ˆæ›¿ä»£å•ä¸€åˆ†ç±»ï¼‰
- âœ… å…¨æ–‡æœç´¢
- âœ… **å¯Œæ–‡æœ¬ç¼–è¾‘å™¨**ï¼ˆæ”¯æŒæ ¼å¼åŒ–ã€é¢œè‰²ã€å›¾ç‰‡æ’å…¥ï¼‰
- âœ… æ–‡ç« æ”¶è—å’Œæ”¶è—å¤¹é¡µé¢
- âœ… **è¯„è®ºç³»ç»Ÿ**ï¼ˆæ”¯æŒå¤šçº§å›å¤ã€å¸¦åˆ†é¡µï¼‰
- âœ… **é—®ç­”ä¸“åŒº**ï¼ˆç®¡ç†å‘˜å¯ç¼–è¾‘çš„ Q&A æ–‡ç« ï¼‰
- âœ… **ç•™è¨€æ¿**ï¼ˆç”¨æˆ·ç•™è¨€å’Œå›å¤åŠŸèƒ½ï¼‰
- âœ… **å…¬å‘Šæ **ï¼ˆç®¡ç†å‘˜å¯ç¼–è¾‘çš„é¦–é¡µå…¬å‘Šï¼‰
- âœ… å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯å‹å¥½ï¼‰
- âœ… ç°ä»£åŒ–çš„ UI è®¾è®¡ï¼ˆæ˜Ÿç©ºèƒŒæ™¯ã€é€æ˜æ•ˆæœï¼‰
- âœ… **ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿ**ï¼ˆå»ç‰¹æ•ˆç‰ˆ/å…¨ç‰¹æ•ˆç‰ˆï¼‰
- âœ… **åŠ¨æ€èƒŒæ™¯å›¾ç‰‡**ï¼ˆå…¨ç‰¹æ•ˆç‰ˆè‡ªåŠ¨è½®æ¢ï¼Œæ”¯æŒæœ¬åœ°å›¾ç‰‡ï¼‰
- âœ… **å°å·¥å…·é¡µé¢**ï¼ˆå·¥å…·é›†åˆé¡µé¢ï¼‰
- âœ… **å›¾ç‰‡æŸ¥çœ‹å™¨**ï¼ˆæ”¯æŒç¼©æ”¾ã€æ‹–åŠ¨ã€å¹»ç¯ç‰‡ã€å¯¼èˆªï¼‰
- âœ… **è¿”å›é¡¶éƒ¨æŒ‰é’®**ï¼ˆæ»šåŠ¨æ—¶è‡ªåŠ¨æ˜¾ç¤ºï¼‰

### ç”¨æˆ·ç³»ç»Ÿ
- âœ… **ç”¨æˆ·æ³¨å†Œ/ç™»å½•**ï¼ˆæ”¯æŒé‚®ç®±æˆ–ç”¨æˆ·åç™»å½•ï¼‰
- âœ… **JWT è®¤è¯**
- âœ… **è§’è‰²ç®¡ç†**ï¼ˆç®¡ç†å‘˜/æ™®é€šç”¨æˆ·ï¼‰
- âœ… **ä¸ªäººä¿¡æ¯ä¿®æ”¹**ï¼ˆæ˜µç§°ã€å¤´åƒã€å¯†ç ï¼‰
- âœ… **å¿˜è®°å¯†ç **ï¼ˆé€šè¿‡ç”¨æˆ·åå’Œé‚®ç®±é‡ç½®ï¼‰
- âœ… **æ”¶è—å¤¹ç®¡ç†**ï¼ˆæŸ¥çœ‹æ”¶è—çš„æ–‡ç« ï¼‰

### ç®¡ç†åŠŸèƒ½
- âœ… **æ–‡ç« ç®¡ç†**ï¼ˆåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ã€æœç´¢ã€åˆ†é¡µï¼‰
- âœ… **ç”¨æˆ·ç®¡ç†**ï¼ˆæŸ¥çœ‹ã€ä¿®æ”¹è§’è‰²ã€åˆ é™¤ï¼‰
- âœ… **å…¬å‘Šæ ç®¡ç†**ï¼ˆç¼–è¾‘é¦–é¡µå…¬å‘Šï¼‰
- âœ… **é—®ç­”ä¸“åŒºç®¡ç†**ï¼ˆç¼–è¾‘ Q&A æ–‡ç« ï¼‰
- âœ… ä¾§è¾¹æ ï¼ˆæœ€æ–°æ–‡ç« ã€æœ€æ–°ç•™è¨€/è¯„è®ºã€éšæœºæ–‡ç« ã€åˆ†ç±»æ ‡ç­¾ï¼‰

### æŠ€æœ¯ç‰¹æ€§
- âœ… RESTful API
- âœ… SQLite æ•°æ®åº“å­˜å‚¨
- âœ… å¯†ç åŠ å¯†å­˜å‚¨
- âœ… Token è®¤è¯æˆæƒ

## é¡¹ç›®ç»“æ„

```
blog/
â”œâ”€â”€ client/                 # å‰ç«¯ Vue åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/        # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ composables/   # Vue Composables
â”‚   â”‚   â”œâ”€â”€ api/           # API å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ router/        # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/                # åç«¯ Express æœåŠ¡å™¨
â”‚   â”œâ”€â”€ index.js          # æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ init-db.js        # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ backgrounds/      # èƒŒæ™¯å›¾ç‰‡ç›®å½•ï¼ˆå…¨ç‰¹æ•ˆç‰ˆï¼‰
â”‚   â””â”€â”€ publishStation.db # SQLite æ•°æ®åº“ï¼ˆè¿è¡Œåç”Ÿæˆï¼‰
â”œâ”€â”€ ecosystem.config.cjs  # PM2 è¿›ç¨‹ç®¡ç†é…ç½®æ–‡ä»¶
â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹
â”œâ”€â”€ .gitignore           # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ package.json         # æ ¹ package.json
â””â”€â”€ README.md
```

## å®‰è£…å’Œè¿è¡Œ

### å‰ç½®è¦æ±‚

- Node.js 16+ 
- npm æˆ– yarn

### å®‰è£…æ­¥éª¤

1. **å®‰è£…æ ¹ç›®å½•ä¾èµ–**
```bash
npm install
```

2. **å®‰è£…å‰ç«¯ä¾èµ–**
```bash
cd client
npm install
cd ..
```

3. **åˆå§‹åŒ–æ•°æ®åº“**
```bash
npm run init-db
```

è¿™å°†åˆ›å»º SQLite æ•°æ®åº“å¹¶æ’å…¥ç¤ºä¾‹æ•°æ®ã€‚

**âš ï¸ é‡è¦æç¤ºï¼š** å¦‚æœä¹‹å‰æœ‰æ—§æ•°æ®åº“ï¼Œè¯·å…ˆåˆ é™¤ï¼š
```bash
# Windows PowerShell
Remove-Item server\publishStation.db

# Linux/Mac
rm server/publishStation.db
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯ï¼š
```bash
npm run dev
```

æˆ–è€…åˆ†åˆ«å¯åŠ¨ï¼š

å¯åŠ¨åç«¯æœåŠ¡å™¨ï¼ˆç«¯å£ 3003ï¼‰ï¼š
```bash
npm run server
```

å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£ 5174ï¼‰ï¼š
```bash
npm run client
```

5. **è®¿é—®åº”ç”¨**

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:5174

## API æ¥å£

### è®¤è¯ç›¸å…³
```bash
# æ³¨å†Œ
POST /api/auth/register
Body: { username, email, password }

# ç™»å½•
POST /api/auth/login
Body: { username, password }

# è·å–å½“å‰ç”¨æˆ·
GET /api/auth/me
Headers: Authorization: Bearer <token>
```

### æ–‡ç« ç›¸å…³
```bash
# è·å–æ–‡ç« åˆ—è¡¨ï¼ˆæ”¯æŒæ ‡ç­¾ç­›é€‰ï¼‰
GET /api/posts?tag=æŠ€æœ¯&page=1&limit=10&search=å…³é”®è¯

# è·å–å•ç¯‡æ–‡ç« ï¼ˆåŒ…å«æ ‡ç­¾ï¼‰
GET /api/posts/:id

# è·å–éšæœºæ–‡ç« 
GET /api/posts/random?limit=5

# åˆ›å»ºæ–‡ç« ï¼ˆç®¡ç†å‘˜ï¼‰
POST /api/posts
Headers: Authorization: Bearer <token>
Body: { title, content, tags: ["æ ‡ç­¾1", "æ ‡ç­¾2"], cover_image }

# æ›´æ–°æ–‡ç« ï¼ˆç®¡ç†å‘˜ï¼‰
PUT /api/posts/:id
Headers: Authorization: Bearer <token>
Body: { title, content, tags: ["æ ‡ç­¾1", "æ ‡ç­¾2"], cover_image }

# åˆ é™¤æ–‡ç« ï¼ˆç®¡ç†å‘˜ï¼‰
DELETE /api/posts/:id
Headers: Authorization: Bearer <token>
```

### æ ‡ç­¾ç›¸å…³
```bash
# è·å–æ‰€æœ‰æ ‡ç­¾
GET /api/tags

# è·å–åˆ†ç±»åˆ—è¡¨ï¼ˆå…¼å®¹æ—§ APIï¼‰
GET /api/categories
```

### ç”¨æˆ·ç›¸å…³
```bash
# è·å–ç”¨æˆ·ä¿¡æ¯
GET /api/user/profile
Headers: Authorization: Bearer <token>

# æ›´æ–°ç”¨æˆ·ä¿¡æ¯
PUT /api/user/profile
Headers: Authorization: Bearer <token>
Body: { username, avatar }

# ä¿®æ”¹å¯†ç 
POST /api/user/change-password
Headers: Authorization: Bearer <token>
Body: { currentPassword, newPassword }

# é‡ç½®å¯†ç 
POST /api/user/reset-password
Body: { username, email, newPassword }
```

### è¯„è®ºç›¸å…³
```bash
# è·å–æ–‡ç« è¯„è®º
GET /api/posts/:id/comments?page=1&limit=10

# æ·»åŠ è¯„è®º
POST /api/posts/:id/comments
Headers: Authorization: Bearer <token>
Body: { content }

# åˆ é™¤è¯„è®º
DELETE /api/comments/:id
Headers: Authorization: Bearer <token>

# è·å–æœ€æ–°è¯„è®ºï¼ˆåŒ…å«æ‰€æœ‰æ–‡ç« è¯„è®ºå’Œç•™è¨€æ¿æ¶ˆæ¯ï¼‰
GET /api/comments/recent?limit=10
```

### æ”¶è—ç›¸å…³
```bash
# åˆ‡æ¢æ”¶è—çŠ¶æ€
POST /api/posts/:id/favorite
Headers: Authorization: Bearer <token>
```

### ç®¡ç†å‘˜ç›¸å…³
```bash
# è·å–æ‰€æœ‰ç”¨æˆ·
GET /api/admin/users
Headers: Authorization: Bearer <token>

# æ›´æ–°ç”¨æˆ·è§’è‰²
PUT /api/admin/users/:id/role
Headers: Authorization: Bearer <token>
Body: { role: "admin" | "user" }

# åˆ é™¤ç”¨æˆ·
DELETE /api/admin/users/:id
Headers: Authorization: Bearer <token>

# è·å–æ‰€æœ‰æ–‡ç« ï¼ˆç®¡ç†ï¼‰
GET /api/admin/posts
Headers: Authorization: Bearer <token>
```

### å…¬å‘Šæ ç›¸å…³
```bash
# è·å–å…¬å‘Š
GET /api/announcement

# æ›´æ–°å…¬å‘Šï¼ˆç®¡ç†å‘˜ï¼‰
PUT /api/announcement
Headers: Authorization: Bearer <token>
Body: { content }
```

### é—®ç­”ä¸“åŒºç›¸å…³
```bash
# è·å–é—®ç­”æ–‡ç« 
GET /api/qa

# æ›´æ–°é—®ç­”æ–‡ç« ï¼ˆç®¡ç†å‘˜ï¼‰
PUT /api/qa
Headers: Authorization: Bearer <token>
Body: { title, content }
```

### ç•™è¨€æ¿ç›¸å…³
```bash
# è·å–ç•™è¨€åˆ—è¡¨
GET /api/guestbook?page=1&limit=10

# æ·»åŠ ç•™è¨€
POST /api/guestbook
Headers: Authorization: Bearer <token>
Body: { content }

# åˆ é™¤ç•™è¨€ï¼ˆç®¡ç†å‘˜æˆ–æœ¬äººï¼‰
DELETE /api/guestbook/:id
Headers: Authorization: Bearer <token>
```

### æ”¶è—ç›¸å…³
```bash
# åˆ‡æ¢æ”¶è—çŠ¶æ€
POST /api/posts/:id/favorite
Headers: Authorization: Bearer <token>

# è·å–ç”¨æˆ·æ”¶è—çš„æ–‡ç« åˆ—è¡¨
GET /api/user/favorites?page=1&limit=10
Headers: Authorization: Bearer <token>
```

### èƒŒæ™¯å›¾ç‰‡ç›¸å…³
```bash
# è·å–èƒŒæ™¯å›¾ç‰‡åˆ—è¡¨ï¼ˆæœ¬åœ°å›¾ç‰‡ï¼‰
GET /api/background-images
Returns: { images: [url1, url2, ...] }
```

## æ•°æ®åº“ç»“æ„

### users è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| username | TEXT | ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰ |
| email | TEXT | é‚®ç®±ï¼ˆå”¯ä¸€ï¼‰ |
| password | TEXT | å¯†ç ï¼ˆåŠ å¯†ï¼‰ |
| avatar | TEXT | å¤´åƒ URL |
| role | TEXT | è§’è‰²ï¼ˆadmin/userï¼‰ |
| created_at | DATETIME | æ³¨å†Œæ—¶é—´ |

### posts è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| title | TEXT | æ–‡ç« æ ‡é¢˜ |
| content | TEXT | æ–‡ç« å†…å®¹ï¼ˆå¯Œæ–‡æœ¬ï¼‰ |
| cover_image | TEXT | å°é¢å›¾ç‰‡ URL |
| favorites_count | INTEGER | æ”¶è—æ•° |
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME | æ›´æ–°æ—¶é—´ |

### tags è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| name | TEXT | æ ‡ç­¾åç§°ï¼ˆå”¯ä¸€ï¼‰ |
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |

### post_tags è¡¨ï¼ˆæ–‡ç« -æ ‡ç­¾å…³è”ï¼‰
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| post_id | INTEGER | æ–‡ç«  ID |
| tag_id | INTEGER | æ ‡ç­¾ ID |
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |

### favorites è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| user_id | INTEGER | ç”¨æˆ· ID |
| post_id | INTEGER | æ–‡ç«  ID |
| created_at | DATETIME | æ”¶è—æ—¶é—´ |

### comments è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| post_id | INTEGER | æ–‡ç«  ID |
| user_id | INTEGER | ç”¨æˆ· ID |
| content | TEXT | è¯„è®ºå†…å®¹ |
| parent_id | INTEGER | çˆ¶è¯„è®º IDï¼ˆå›å¤æ—¶ä½¿ç”¨ï¼ŒNULL ä¸ºæ ¹è¯„è®ºï¼‰ |
| created_at | DATETIME | è¯„è®ºæ—¶é—´ |

### announcement è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| content | TEXT | å…¬å‘Šå†…å®¹ï¼ˆHTMLæ ¼å¼ï¼‰ |
| updated_at | DATETIME | æ›´æ–°æ—¶é—´ |

### qa è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| title | TEXT | Q&A æ ‡é¢˜ |
| content | TEXT | Q&A å†…å®¹ï¼ˆHTMLæ ¼å¼ï¼‰ |
| updated_at | DATETIME | æ›´æ–°æ—¶é—´ |

### guestbook è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”®ï¼Œè‡ªå¢ |
| user_id | INTEGER | ç”¨æˆ· ID |
| content | TEXT | ç•™è¨€å†…å®¹ |
| parent_id | INTEGER | çˆ¶ç•™è¨€ IDï¼ˆå›å¤æ—¶ä½¿ç”¨ï¼ŒNULL ä¸ºæ ¹ç•™è¨€ï¼‰ |
| created_at | DATETIME | ç•™è¨€æ—¶é—´ |

## å¼€å‘è¯´æ˜

### é¦–æ¬¡ä½¿ç”¨

1. **ç¬¬ä¸€ä¸ªæ³¨å†Œçš„ç”¨æˆ·ä¼šè‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜**
2. **ç®¡ç†å‘˜å¯ä»¥åœ¨åå°åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æ–‡ç« **
3. **ç®¡ç†å‘˜å¯ä»¥ç®¡ç†ç”¨æˆ·ï¼ˆä¿®æ”¹è§’è‰²ã€åˆ é™¤ç”¨æˆ·ï¼‰**

### æ·»åŠ æ–°æ–‡ç« 

ç®¡ç†å‘˜ç™»å½•åå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ·»åŠ æ–‡ç« ï¼š

1. **é€šè¿‡ç®¡ç†åå°**ï¼ˆæ¨èï¼‰
   - ç™»å½•åè®¿é—® `/admin`
   - ç‚¹å‡»"åˆ›å»ºæ–°æ–‡ç« "
   - ä½¿ç”¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç¼–å†™å†…å®¹
   - æ·»åŠ æ ‡ç­¾
   - ä¿å­˜å‘å¸ƒ

2. **ä½¿ç”¨ API**
```bash
curl -X POST http://localhost:3003/api/posts \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <your_token>" \
  -d '{
    "title": "æ–°æ–‡ç« æ ‡é¢˜",
    "content": "<p>æ–‡ç« å†…å®¹ï¼ˆHTMLæ ¼å¼ï¼‰</p>",
    "tags": ["æŠ€æœ¯", "Vue"],
    "cover_image": "https://example.com/image.jpg"
  }'
```

3. **ç›´æ¥æ“ä½œæ•°æ®åº“**
```bash
sqlite3 server/publishStation.db
```

### è‡ªå®šä¹‰æ ·å¼

æ ·å¼ä½¿ç”¨ Tailwind CSSï¼Œé…ç½®æ–‡ä»¶åœ¨ `client/tailwind.config.js`ã€‚ä½ å¯ä»¥ä¿®æ”¹ä¸»é¢˜é¢œè‰²å’Œå…¶ä»–æ ·å¼é€‰é¡¹ã€‚

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

æ„å»ºåçš„æ–‡ä»¶å°†åœ¨ `client/dist` ç›®å½•ä¸­ã€‚

## ç‰¹æ€§å±•ç¤º

- ğŸ¨ **ç°ä»£åŒ–è®¾è®¡** - æ˜Ÿç©ºèƒŒæ™¯ã€é€æ˜æ•ˆæœã€æµç•…åŠ¨ç”»ã€è‡ªå®šä¹‰æ»šåŠ¨æ¡
- ğŸ“± **å“åº”å¼** - å®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- ğŸ” **æœç´¢åŠŸèƒ½** - æ”¯æŒæ ‡é¢˜å’Œå†…å®¹æœç´¢
- ğŸ·ï¸ **å¤šæ ‡ç­¾ç³»ç»Ÿ** - çµæ´»çš„æ ‡ç­¾ç®¡ç†å’Œç­›é€‰
- âœï¸ **å¯Œæ–‡æœ¬ç¼–è¾‘å™¨** - æ”¯æŒæ ¼å¼åŒ–ã€é¢œè‰²ã€å›¾ç‰‡ã€æ ‡é¢˜æ ·å¼
- ğŸ‘¤ **ç”¨æˆ·ç³»ç»Ÿ** - å®Œæ•´çš„è®¤è¯å’Œæˆæƒï¼ˆæ”¯æŒé‚®ç®±æˆ–ç”¨æˆ·åç™»å½•ï¼‰
- ğŸ’¬ **è¯„è®ºäº’åŠ¨** - å¤šçº§è¯„è®ºå›å¤ã€ç•™è¨€æ¿ã€é—®ç­”ä¸“åŒº
- ğŸ“¸ **å›¾ç‰‡åŠŸèƒ½** - å›¾ç‰‡æŸ¥çœ‹å™¨ï¼ˆç¼©æ”¾ã€æ‹–åŠ¨ã€å¹»ç¯ç‰‡ï¼‰ã€æ–‡ç« å›¾ç‰‡æ‚¬æµ®æ”¾å¤§
- ğŸ¯ **æ”¶è—ç³»ç»Ÿ** - æ–‡ç« æ”¶è—ã€æ”¶è—å¤¹é¡µé¢
- ğŸ‘‘ **è§’è‰²ç®¡ç†** - ç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·æƒé™åˆ†ç¦»
- ğŸ“¢ **å…¬å‘Šç³»ç»Ÿ** - ç®¡ç†å‘˜å¯ç¼–è¾‘é¦–é¡µå…¬å‘Š
- âš¡ **æ€§èƒ½ä¼˜åŒ–** - ä½¿ç”¨ Vite å¿«é€Ÿæ„å»º
- ğŸ—„ï¸ **è½»é‡æ•°æ®åº“** - SQLite æ— éœ€é¢å¤–é…ç½®
- ğŸ”’ **å®‰å…¨ä¿éšœ** - JWT è®¤è¯ã€å¯†ç åŠ å¯†ã€çº§è”åˆ é™¤
- ğŸ” **ç”¨æˆ·ä½“éªŒ** - è¿”å›é¡¶éƒ¨æŒ‰é’®ã€è‡ªåŠ¨æ»šåŠ¨ã€é¡µé¢åˆ·æ–°æœºåˆ¶

## æ³¨æ„äº‹é¡¹

1. **ç¬¬ä¸€ä¸ªæ³¨å†Œçš„ç”¨æˆ·ä¼šè‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜**
2. **é»˜è®¤ç®¡ç†å‘˜è´¦å·**ï¼ˆåˆå§‹åŒ–æ•°æ®åº“æ—¶åˆ›å»ºï¼‰ï¼š
   - ç”¨æˆ·åï¼š`admin`
   - é‚®ç®±ï¼š`admin@admin`
   - å¯†ç ï¼š`123456`
3. **JWT Token æœ‰æ•ˆæœŸä¸º 7 å¤©**
4. **å¯†ç ä½¿ç”¨ bcrypt åŠ å¯†å­˜å‚¨**
5. **ç®¡ç†å‘˜ä¸èƒ½åˆ é™¤è‡ªå·±**
6. **æ‰€æœ‰éœ€è¦æƒé™çš„æ“ä½œéƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ Token**
7. **æ•°æ®åº“æ–‡ä»¶ä¸º `publishStation.db`**ï¼ˆä½äº `server/` ç›®å½•ï¼‰
8. **èƒŒæ™¯å›¾ç‰‡**ï¼šå…¨ç‰¹æ•ˆç‰ˆçš„èƒŒæ™¯å›¾ç‰‡ä½äº `server/backgrounds/` ç›®å½•ï¼Œæ”¯æŒæœ¬åœ°å›¾ç‰‡
9. **è¯„è®ºå’Œç•™è¨€æ”¯æŒå¤šçº§å›å¤**ï¼Œåˆ é™¤æ ¹è¯„è®º/ç•™è¨€ä¼šè‡ªåŠ¨çº§è”åˆ é™¤æ‰€æœ‰å›å¤
10. **åˆå§‹åŒ–æ•°æ®åº“**ï¼šè¿è¡Œ `npm run init-db` ä¼šåˆ›å»ºç¤ºä¾‹æ•°æ®ï¼ˆ11ç¯‡æ–‡ç« ã€ç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·ã€é—®ç­”å†…å®¹ã€ç•™è¨€æ¿æ¶ˆæ¯ã€è¯„è®ºå’Œå›å¤ï¼‰

## Linux æœåŠ¡å™¨éƒ¨ç½²

### å‰ç½®è¦æ±‚

- Linux æœåŠ¡å™¨ï¼ˆUbuntu 20.04+ / CentOS 7+ / Debian 10+ï¼‰
- Root æˆ– sudo æƒé™
- åŸŸåï¼ˆå¯é€‰ï¼Œç”¨äºé…ç½® HTTPSï¼‰

### å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

#### 1. æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y  # Ubuntu/Debian
sudo yum update -y  # CentOS/RHEL

# å®‰è£… Node.js 18+
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs  # Ubuntu/Debian

# å®‰è£… PM2
sudo npm install -g pm2

# å®‰è£… Nginxï¼ˆå¯é€‰ï¼Œç”¨äºåå‘ä»£ç†ï¼‰
sudo apt install nginx -y
```

#### 2. ä¸Šä¼ é¡¹ç›®

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨ Gitï¼ˆæ¨èï¼‰
git clone https://github.com/ZhiheZier/myPublishingStation.git ~/blog
cd ~/blog

# æ–¹å¼äºŒï¼šä½¿ç”¨ SCPï¼ˆåœ¨æœ¬åœ°æ‰§è¡Œï¼‰
# scp -r . user@server-ip:~/blog
```

#### 3. å®‰è£…ä¾èµ–å’Œæ„å»º

```bash
cd ~/blog

# åˆ é™¤ node_modulesï¼ˆå¦‚æœä»å…¶ä»–å¹³å°å¤åˆ¶è¿‡æ¥çš„ï¼‰
rm -rf node_modules client/node_modules

# å®‰è£…ç¼–è¯‘å·¥å…·ï¼ˆå¦‚æœéœ€è¦ï¼‰
sudo apt install build-essential python3 -y  # Ubuntu/Debian

# å®‰è£…ä¾èµ–
npm install
cd client && npm install && cd ..

# æ„å»ºå‰ç«¯
cd client && npm run build && cd ..
```

#### 4. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œä¿®æ”¹ JWT_SECRETï¼ˆé‡è¦ï¼ï¼‰
nano .env

# æˆ–ä½¿ç”¨å‘½ä»¤ç”Ÿæˆ JWT_SECRET
sed -i "s/JWT_SECRET=.*/JWT_SECRET=$(openssl rand -base64 32)/" .env
```

#### 5. åˆå§‹åŒ–æ•°æ®åº“

```bash
npm run init-db
```

#### 6. å¯åŠ¨åº”ç”¨

```bash
# åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir -p logs

# ä½¿ç”¨ PM2 å¯åŠ¨
pm2 start ecosystem.config.cjs

# æŸ¥çœ‹çŠ¶æ€
pm2 status
pm2 logs myPublishingStation

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 save
pm2 startup
```

#### 7. é…ç½® Nginx åå‘ä»£ç†ï¼ˆå¯é€‰ä½†æ¨èï¼‰

```bash
# Ubuntu/Debian
sudo nano /etc/nginx/sites-available/blog

# CentOS/RHEL
sudo nano /etc/nginx/conf.d/blog.conf
```

æ·»åŠ é…ç½®ï¼š
```nginx
server {
    listen 80;
    server_name _;

    access_log /var/log/nginx/blog_access.log;
    error_log /var/log/nginx/blog_error.log;
    client_max_body_size 50M;

    location / {
        proxy_pass http://localhost:3003;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }
}
```

å¯ç”¨é…ç½®ï¼š
```bash
# Ubuntu/Debian
sudo ln -s /etc/nginx/sites-available/blog /etc/nginx/sites-enabled/
sudo rm /etc/nginx/sites-enabled/default  # åˆ é™¤é»˜è®¤é…ç½®
sudo nginx -t
sudo systemctl reload nginx

# CentOS/RHEL
sudo mv /etc/nginx/conf.d/default.conf /etc/nginx/conf.d/default.conf.backup
sudo nginx -t
sudo systemctl reload nginx
```

#### 8. é…ç½®é˜²ç«å¢™

```bash
# Ubuntu/Debian
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable

# CentOS/RHEL
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
```

**é‡è¦**ï¼šå¦‚æœä½¿ç”¨äº‘æœåŠ¡å™¨ï¼Œè¿˜éœ€è¦åœ¨äº‘æ§åˆ¶å°é…ç½®å®‰å…¨ç»„è§„åˆ™å¼€æ”¾ç«¯å£ 80 å’Œ 443ã€‚

#### 9. è®¿é—®åº”ç”¨

- **æœ‰ Nginx**ï¼š`http://your-server-ip` æˆ– `http://your-domain.com`
- **æ—  Nginx**ï¼š`http://your-server-ip:3003`

### å¸¸è§é—®é¢˜

**Q: sqlite3 æ¨¡å—é”™è¯¯ï¼ˆinvalid ELF headerï¼‰**

A: åˆ é™¤ node_modules é‡æ–°å®‰è£…ï¼š
```bash
rm -rf node_modules client/node_modules
sudo apt install build-essential python3 -y
npm install
```

**Q: è®¿é—® 80 ç«¯å£æ˜¾ç¤º "Welcome to nginx!"**

A: åˆ é™¤é»˜è®¤ Nginx é…ç½®å¹¶é‡æ–°åŠ è½½ï¼š
```bash
sudo rm /etc/nginx/sites-enabled/default  # Ubuntu/Debian
sudo systemctl reload nginx
```

**Q: PM2 å¯åŠ¨å¤±è´¥**

A: æ£€æŸ¥æ˜¯å¦åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼Œé…ç½®æ–‡ä»¶ä¸º `ecosystem.config.cjs`ï¼š
```bash
cd ~/blog
pm2 start ecosystem.config.cjs
```

### æ›´æ–°åº”ç”¨

```bash
cd ~/blog
git pull origin main  # å¦‚æœä½¿ç”¨ Git
npm install
cd client && npm install && npm run build && cd ..
pm2 restart myPublishingStation
```

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼
